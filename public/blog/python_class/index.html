<!DOCTYPE html>
<html lang="en-us">
<head>
  
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-51110003-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-51110003-2');
    </script>

  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">


<title>A whirwind tour of classes (Leveling up in Python - I) - Gurudev Ilangovan</title>
<meta property="og:title" content="A whirwind tour of classes (Leveling up in Python - I) - Gurudev Ilangovan">
<meta property="og:type" content="article">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://amber.rbind.io/blog/img/classy.jpg" >
  

<meta property="description" content="Using classes for your python tasks">
<meta property="og:description" content="Using classes for your python tasks">


<meta name="twitter:creator" content="">

<meta name="description" content="A portfolio for my data science projects, analyses and blogs about things that I&#39;ve been learning.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="twitter:creator" content="">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" href="/css/bootstrap.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/owl.carousel.css">
<link rel="stylesheet" href="/css/owl.theme.css">



<link href="/css/style.default.css" rel="stylesheet" id="theme-stylesheet">

<link href="/css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="/img/favicon.png">


<link rel="stylesheet" href="/css/github-gist.css" rel="stylesheet" id="theme-stylesheet">






<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-51110003-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


</head>
<body>
  <div id="all">
      <div class="container-fluid">
          <div class="row row-offcanvas row-offcanvas-left">
              
<div id="sidebar" class="col-sb-fixedpos col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
  <div class="sidebar-content">
    <h1 class="sidebar-heading"><a href="/">Gurudev Ilangovan</a></h1>
    
    <p class="sidebar-p">Guru is a Senior Data Analyst at Capital One.</p>
    
    <p class="sidebar-p">This website is a portfolio for his data science projects, analyses and blogs about things that he's been learning in his data science journey.</p>
    

    <p class="sidebar-p">
      <i class="fa fa-map-marker" aria-hidden="true"></i> McLean, Virginia</p>

    <ul class="sidebar-menu">
      
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/projects/">Projects</a></li>
      
      <li><a href="/analyses/">Analyses</a></li>
      
      <li><a href="/blog/">Blog</a></li>
      
      <li><a href="/resume/">Resume</a></li>
      
      <li><a href="/contact/">Get in Touch</a></li>
      

      





      



      





<li><a href="#tags" data-toggle="collapse" >Tags</a></li>

<div id="tags" class="collapse">
    <div class="panel sidebar-menu">
        <div class="panel-body">
        <ul class="tag-cloud">
            
            <li><a href="/tags/ai"><i class="fa fa-tags"></i> ai</a>
            </li>
            
            <li><a href="/tags/algorithms"><i class="fa fa-tags"></i> algorithms</a>
            </li>
            
            <li><a href="/tags/analysis"><i class="fa fa-tags"></i> analysis</a>
            </li>
            
            <li><a href="/tags/api"><i class="fa fa-tags"></i> api</a>
            </li>
            
            <li><a href="/tags/caret"><i class="fa fa-tags"></i> caret</a>
            </li>
            
            <li><a href="/tags/censoring"><i class="fa fa-tags"></i> censoring</a>
            </li>
            
            <li><a href="/tags/class"><i class="fa fa-tags"></i> class</a>
            </li>
            
            <li><a href="/tags/cnn"><i class="fa fa-tags"></i> cnn</a>
            </li>
            
            <li><a href="/tags/data_imbalance"><i class="fa fa-tags"></i> data_imbalance</a>
            </li>
            
            <li><a href="/tags/data_privacy"><i class="fa fa-tags"></i> data_privacy</a>
            </li>
            
            <li><a href="/tags/data_viz"><i class="fa fa-tags"></i> data_viz</a>
            </li>
            
            <li><a href="/tags/deep_learning"><i class="fa fa-tags"></i> deep_learning</a>
            </li>
            
            <li><a href="/tags/fastai"><i class="fa fa-tags"></i> fastai</a>
            </li>
            
            <li><a href="/tags/fastai_miniseries"><i class="fa fa-tags"></i> fastai_miniseries</a>
            </li>
            
            <li><a href="/tags/flask"><i class="fa fa-tags"></i> flask</a>
            </li>
            
            <li><a href="/tags/forecasting"><i class="fa fa-tags"></i> forecasting</a>
            </li>
            
            <li><a href="/tags/foss"><i class="fa fa-tags"></i> foss</a>
            </li>
            
            <li><a href="/tags/github"><i class="fa fa-tags"></i> github</a>
            </li>
            
            <li><a href="/tags/google_sheets"><i class="fa fa-tags"></i> google_sheets</a>
            </li>
            
            <li><a href="/tags/hci"><i class="fa fa-tags"></i> hci</a>
            </li>
            
            <li><a href="/tags/heroku"><i class="fa fa-tags"></i> heroku</a>
            </li>
            
            <li><a href="/tags/image_classification"><i class="fa fa-tags"></i> image_classification</a>
            </li>
            
            <li><a href="/tags/inference"><i class="fa fa-tags"></i> inference</a>
            </li>
            
            <li><a href="/tags/information_safety"><i class="fa fa-tags"></i> information_safety</a>
            </li>
            
            <li><a href="/tags/level-up"><i class="fa fa-tags"></i> level-up</a>
            </li>
            
            <li><a href="/tags/machine-learning"><i class="fa fa-tags"></i> machine-learning</a>
            </li>
            
            <li><a href="/tags/machine_learning"><i class="fa fa-tags"></i> machine_learning</a>
            </li>
            
            <li><a href="/tags/mongo"><i class="fa fa-tags"></i> mongo</a>
            </li>
            
            <li><a href="/tags/nodejs"><i class="fa fa-tags"></i> nodejs</a>
            </li>
            
            <li><a href="/tags/oop"><i class="fa fa-tags"></i> oop</a>
            </li>
            
            <li><a href="/tags/optimization"><i class="fa fa-tags"></i> optimization</a>
            </li>
            
            <li><a href="/tags/package"><i class="fa fa-tags"></i> package</a>
            </li>
            
            <li><a href="/tags/prophet"><i class="fa fa-tags"></i> prophet</a>
            </li>
            
            <li><a href="/tags/purrr"><i class="fa fa-tags"></i> purrr</a>
            </li>
            
            <li><a href="/tags/pyomo"><i class="fa fa-tags"></i> pyomo</a>
            </li>
            
            <li><a href="/tags/python"><i class="fa fa-tags"></i> python</a>
            </li>
            
            <li><a href="/tags/r"><i class="fa fa-tags"></i> r</a>
            </li>
            
            <li><a href="/tags/recommender_systems"><i class="fa fa-tags"></i> recommender_systems</a>
            </li>
            
            <li><a href="/tags/record_linkage"><i class="fa fa-tags"></i> record_linkage</a>
            </li>
            
            <li><a href="/tags/redis"><i class="fa fa-tags"></i> redis</a>
            </li>
            
            <li><a href="/tags/rvest"><i class="fa fa-tags"></i> rvest</a>
            </li>
            
            <li><a href="/tags/scheduling"><i class="fa fa-tags"></i> scheduling</a>
            </li>
            
            <li><a href="/tags/scraping"><i class="fa fa-tags"></i> scraping</a>
            </li>
            
            <li><a href="/tags/sentiment_analysis"><i class="fa fa-tags"></i> sentiment_analysis</a>
            </li>
            
            <li><a href="/tags/sequential_data_mining"><i class="fa fa-tags"></i> sequential_data_mining</a>
            </li>
            
            <li><a href="/tags/shiny"><i class="fa fa-tags"></i> shiny</a>
            </li>
            
            <li><a href="/tags/survival_analysis"><i class="fa fa-tags"></i> survival_analysis</a>
            </li>
            
            <li><a href="/tags/tennis"><i class="fa fa-tags"></i> tennis</a>
            </li>
            
            <li><a href="/tags/text"><i class="fa fa-tags"></i> text</a>
            </li>
            
            <li><a href="/tags/thoughts"><i class="fa fa-tags"></i> thoughts</a>
            </li>
            
            <li><a href="/tags/tidyverse"><i class="fa fa-tags"></i> tidyverse</a>
            </li>
            
            <li><a href="/tags/tutorials"><i class="fa fa-tags"></i> tutorials</a>
            </li>
            
        </ul>
    </div>
    </div>
</div>





    </ul>
    <p class="social">
  
  
  
  <a href="https://twitter.com/GuruIlan" data-animate-hover="pulse" class="external twitter">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  <a href="mailto:gurudev.ilango@gmail.com" data-animate-hover="pulse" class="email">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://www.linkedin.com/in/gurudevilangovan/" data-animate-hover="pulse">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
  
<a href="https://www.github.com/ilangurudev">
  <i class="fa fa-github"></i>
</a>




</p>


    <div class="copyright">
      <p class="credit">
        
        &copy;2020 Gurudev Ilangovan
        
        | Template by <a href="https://bootstrapious.com/free-templates" class="external">Bootstrapious.com</a>

&amp; ported to Hugo by <a href="https://github.com/kishaningithub">Kishan B</a> | Additional styling from <a href="https://amber.rbind.io/">amber.rbind.io</a>

      </p>
    </div>
  </div>
</div>
<div class="col-xs-12 col-sm-8 col-md-9 content-column white-background col-main-fixedpos">
  <div class="small-navbar visible-xs">
  <button type="button" data-toggle="offcanvas" class="btn btn-ghost pull-left"> <i class="fa fa-align-left"> </i>Menu</button>
  <h1 class="small-navbar-heading"><a href="/">Gurudev Ilangovan</a></h1>
</div>


            <div class="row">
                  <div class="col-sm-4">
                    <div class="image">
                      <img src="/blog/img/classy.jpg" class="img-responsive" alt="">
                    </div>
                  </div>

                  <div class="col-md-8">
                      <h2>A whirwind tour of classes (Leveling up in Python - I)</h2>
                          <p class="author-category">
                            Gurudev Ilangovan
                          </p>

                          <p class="date-comments">
                          <i class="fa fa-calendar-o"></i> April 15, 2020
                          </p>

                          
                  
                      </div>
                    </div>
                  </br>

<div class="row">
   <div class="content-column-content">
          <div class="col-lg-8">

<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#tackling-complexity">Tackling Complexity</a></li>
<li><a href="#a-toy-example-without-classes">A toy example without classes</a><ul>
<li><a href="#iteration-1">Iteration 1</a></li>
<li><a href="#iteration-2">Iteration 2</a></li>
</ul></li>
<li><a href="#the-same-example-but-lets-be-classy">The same example but let’s be classy</a><ul>
<li><a href="#iteration-1-1">Iteration 1</a></li>
<li><a href="#iteration-2-1">Iteration 2</a></li>
</ul></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</div>

<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Welcome to the first post in the <a href="/blog/python_level_up">leveling up in Python series</a>! In this article, I want to talk about how classes are useful to me. I am by no means an expert in program design or “Object Oriented Programming”. As a teen (and still do sometimes) I detested terms like encapsulation, polymorphism, abstraction, etc because they weren’t tangible concepts. My understanding and usage of object orientation in python is a lot more practical now. We will go over the basic mechanics which are surprisingly simple to grasp but more importantly, I found out in my relatively nascent python journey, is figuring out why we should use classes and how they can make us efficient programmers.</p>
</div>
<div id="tackling-complexity" class="section level1">
<h1>Tackling Complexity</h1>
<p>Simply put, classes help us <strong>deal with complexity</strong> more efficiently. As a data analyst at Capital One, I’ve had to work on a process improvement projects. Simple tasks really - pull from a database, do some calculations, link with another data set, email results appropriately. Let me know if this situation sounds familiar: you see a simple problem and an opportunity for some automation or process improvement. “I could write a python script to do this in under an hour” you tell yourself and you do. The script works great and your boss likes it. A month passes by and people like it but feel a “small enhancement” would make it so much more awesome! That’s when you know your product is really useful. There’s no such thing as a flawless product and there will always be improvements that can be made. The question then is “how conducive is a codebase to changes?”.</p>
<p>The “quick and dirty” solution that I came up with is not so “quick” anymore because it is still very much, dirty. Classes force us to organize our code better and in most instances, results in cleaner, more maintainable code. The ROI on maintainable code is pretty high even though in the short run, the setup seems to be a tad annoying. The fancy term for this is <strong>technical debt</strong>. It’s kind of the same concept when we first started using functions too right?</p>
<p><img src="/blog/img/tech_debt.jpg" width="100%"></p>
</div>
<div id="a-toy-example-without-classes" class="section level1">
<h1>A toy example without classes</h1>
<p>Let’s consider a toy example. We have some HR data and we want to print out the pay statement for employees. Let’s just assume (because I suck at manufacturing toy examples) that the toy example also needs to have the age, address and department info. The statement would be</p>
<blockquote>
<p>You, John Doe, aged 25, living in 221B Baker Street, London, UK and working in the HR department earned a sum of $1,000,000 this month.</p>
</blockquote>
<p>Let’s lay some ground rules - we have the first name, last name, birthday, department, street address, city and country, salary amount and salary currency (we have pounds and dollars). Let’s start as usual by writing some helper functions to demonstrate the typical workflow.</p>
<div id="iteration-1" class="section level2">
<h2>Iteration 1</h2>
<pre class="python"><code>from datetime import datetime

def calculate_age(birthday):
    # keeping things simple
    return datetime.today().year - int(birthday[-4:])

def create_address(street_address, city, country):
    return &#39;,&#39;.join([street_address, city, country])

def convert_pound_to_dollar(amount):
    # you would actually be fetching the conversion factor from an api, because you are fancy like that
    conversion_fct = 1.5
    return amount*conversion_fct

def create_pay_statement(fname, lname, 
                         dept, 
                         birthday, 
                         street_address, city, country, 
                         salary_amt, is_dollar=True):
    age = calculate_age(birthday)
    address = create_address(street_address, city, country)
    salary_amt = salary_amt if is_dollar else convert_pound_to_dollar(salary_amt)
    salary_amt = round(salary_amt)
    pay_statement = f&quot;You, {fname} {lname}, aged {age}, living in {address} and working in {dept}, earned a sum of ${salary_amt:,} this month!&quot;
    return pay_statement

create_pay_statement(fname=&quot;John&quot;, lname=&quot;Doe&quot;, 
                     dept=&quot;HR&quot;, 
                     birthday=&quot;01-01-1990&quot;, 
                     street_address=&quot;221B, Baker St&quot;, city=&quot;London&quot;, country=&quot;UK&quot;, 
                     salary_amt=666666.666667, is_dollar=False)</code></pre>
<pre><code>&#39;You, John Doe, aged 30, living in 221B, Baker St,London,UK and working in HR, earned a sum of $1,000,000 this month!&#39;</code></pre>
</div>
<div id="iteration-2" class="section level2">
<h2>Iteration 2</h2>
<p>Yay! This works super well and people love this functionality where they can even see their age and address in the pay statement (I mean who doesn’t want to see their age in their pay statement?). But hey, would it not be awesome if they get this info right in their inbox? Their email address is simply first name and last name separated by period <span class="citation">@abc.com</span>. We conveniently have an <code>emailer</code> that can send to the address. But how do we integrate our functionality with our code?</p>
<pre class="python"><code>def email_pay_statement(fname, lname, 
                         dept, 
                         birthday, 
                         street_address, city, country, 
                         salary_amt, is_dollar=True):
    to_email = f&quot;{fname}.{lname}@abc.com&quot;
    pay_statement = create_pay_statement(fname, lname, 
                                         dept, 
                                         birthday, 
                                         street_address, city, country, 
                                         salary_amt, is_dollar)
    emailer(from_email=&quot;admins@abc.com&quot;, to_email=to_email,
            subject=&quot;Here&#39;s your Gs, dawg!&quot;, pay_statement=pay_statement).send()</code></pre>
<p>I don’t know why the the admins want the subject to be so colloquial, but anyway. Did you notice how we had to had to create a new function with literally the same function arguments and then call our pay statement function with them. Kinda messy… The worse part, if you have to change your <code>create_pay_statement</code> function by say adding another argument, your <code>email_pay_statement</code> probably will be affected. Of course we could argue that this issue could be somewhat alleviated by using <code>*args</code> and <code>**kwargs</code> but you’d anyway be passing street address to an emailer and that is clunky regardless.</p>
</div>
</div>
<div id="the-same-example-but-lets-be-classy" class="section level1">
<h1>The same example but let’s be classy</h1>
<p>Getting started with classes, is relatively straightforward:</p>
<ol style="list-style-type: decimal">
<li>A class is a template. An object is something created using the template. Employee is a class using which a John Doe object can be created.</li>
<li>The first argument to any method in a class is, by default an object of the same class. It’s called <code>self</code> by convention</li>
<li><code>__init__</code> method is used to get the data arguments. It’s the class “constructor”</li>
<li><strong>Anything stored in self will be accessible anywhere in the class</strong></li>
</ol>
<div id="iteration-1-1" class="section level2">
<h2>Iteration 1</h2>
<pre class="python"><code>class EmployeePayStatement:
    
    def __init__(self, 
                 fname, lname, 
                 dept, 
                 birthday, 
                 street_address, city, country, 
                 salary_amt, is_dollar=True):
        
        # you don&#39;t have to store all the variables and can use the methods 
        # directly to store what&#39;s important
        # I&#39;m simply deciding to store.
        self.fname, self.lname, self.birthday = fname, lname, birthday
        self.dept = dept
        self.street_address, self.city, self.country = street_address, city, country, 
        self.salary_amt, self.is_dollar = salary_amt, is_dollar
        
        # I have the liberty of calling my helper methods right here for other 
        # functions that we might create later that use age, address, salary
        self.calculate_age()
        self.create_address()
        if not self.is_dollar:
            self.convert_pound_to_dollar()
        
        # since this is a pay statement class, I&#39;m calculating right here
        # But this method can be called outside the class instead should you so choose  
        self.create_pay_statement()
    
    
    def calculate_age(self):
        self.age = datetime.today().year - int(self.birthday[-4:])

    def create_address(self):
        self.address = &#39;,&#39;.join([self.street_address, self.city, self.country])

    def convert_pound_to_dollar(self):
        conversion_fct = 1.5
        self.salary_amt = self.salary_amt*conversion_fct
        self.is_dollar = True

    def create_pay_statement(self):
        pay_statement = (f&quot;You, {self.fname} {self.lname}, aged {self.age}, living in {self.address} and working in {self.dept}, &quot;
                         f&quot;earned a sum of ${round(self.salary_amt):,} this month!&quot;)
        self.pay_statement = pay_statement
        
</code></pre>
<pre class="python"><code>john_doe_pstmnt = EmployeePayStatement(fname=&quot;John&quot;, lname=&quot;Doe&quot;, 
                                         dept=&quot;HR&quot;, 
                                         birthday=&quot;01-01-1990&quot;, 
                                         street_address=&quot;221B, Baker St&quot;, city=&quot;London&quot;, country=&quot;UK&quot;, 
                                         salary_amt=666666.666667, is_dollar=False)

john_doe_pstmnt.pay_statement</code></pre>
<pre><code>&#39;You, John Doe, aged 30, living in 221B, Baker St,London,UK and working in HR, earned a sum of $1,000,000 this month!&#39;</code></pre>
<p>Another advantage: whatever attribute you calculate is accessible outside. Let’s say you suddenly feel the urge to calculate the ratio of <code>salary</code> and <code>age</code>.</p>
<pre class="python"><code>john_doe_pstmnt.salary_amt/john_doe_pstmnt.age</code></pre>
<pre><code>33333.333333350005</code></pre>
</div>
<div id="iteration-2-1" class="section level2">
<h2>Iteration 2</h2>
<p>“It works but whatever, we didn’t achieve anything new” you say. It looks slightly neater but an <code>__init__</code> method with a <code>self</code> argument seems more like work than is worth. Fair enough, but let’s go through the same process of adding an emailer. It’s as simple as adding the following function to the class.</p>
<pre class="python"><code>def email_pay_statement(self):
    to_email = f&quot;{self.fname}.{self.lname}@abc.com&quot;
    emailer(from_email=&quot;admins@abc.com&quot;, to_email=to_email,
            subject=&quot;Here&#39;s your Gs, dawg!&quot;, pay_statement=self.pay_statement).send()</code></pre>
<p>Notice how there’s literally no repetition and no messy code. You don’t get a bunch of arguments and then pass the same bunch. Best of all, we don’t calculate the pay statement inside the emailer - it does only what it’s supposed to do. Clear organization. Adding functionality to the existing codebase is a breeze!
Avoiding technical debt, my friends. Using classes may look like slightly more the first iteration but pays off incredibly fast. In many cases, I’ve seen it save work in the first iteration itself!</p>
</div>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<p>I hope I’ve given you some motivation to try out classes. As always, hit me up with feedback! :)</p>
</div>

      
       </div>
     </div>
   </div>





        <a href="#" class="back-to-top">
        <i class="fa fa-arrow-circle-o-up" aria-hidden="true"></i>

        </a>

         <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "ilangurudev" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
   

          </div>
      </div>
  </div>
  <script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.cookie.js"> </script>
<script src="/js/ekko-lightbox.js"></script>
<script src="/js/jquery.scrollTo.min.js"></script>
<script src="/js/masonry.pkgd.min.js"></script>
<script src="/js/imagesloaded.pkgd.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/front.js"></script>
<script src="/js/backtotop.js"></script> 
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
